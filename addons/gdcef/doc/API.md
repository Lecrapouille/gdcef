# CEF gdscript API

## GDCef

`GDCef` is a class deriving from Godot's Node and interfacing the core of the
Chromium Embedded Framework. This class can create instances of `GDBrowserView`
(aka browser tabs) and store them as Godot child nodes (can be accessed from
`get_node`).

| Godot function name | arguments                                       | return         | comment                                                                                                                                                                                                 |
|---------------------|-------------------------------------------------|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `_process`            | `dt`: float                                       | void           | Hidden function called automatically by Godot and call CEF internal pump messages.                                                                                                                      |
| `create_browser`      | `url`: string, `name`: string, `width`: int `height`: int | GDBrowserView* | Create a browser tab and store its instance as child node. `url`: the page link. `name`: the browser name to found from the scene graph. `width`: the initial width dimension of the document. `height`: the initial height dimension of the document. |
| `shutdown`            |                                                 |                | Release CEF memory and sub CEF processes are notified that the application is exiting. All browsers are destroyed.                                                                                      |

## GDBrowserView

Class wrapping the `CefBrowser` class and export methods for Godot script.
This class is instanciate by `GDCef` by `create_browser` and shall return its
texture to Godot instance knowing how to render it (ie. `TextureRect`).

| Godot function name   | arguments                                                   | return            | comment                                                                                                                                                                                                                                     |
|-----------------------|-------------------------------------------------------------|-------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `close`                 |                                                             |                   | Close the browser.                                                                                                                                                                                                                          |
| `id`                    |                                                             | int               | Return the unique browser identifier.                                                                                                                                                                                                       |
| `is_valid`              |                                                             | bool              | Return True if this object is currently valid.                                                                                                                                                                                              |
| `get_texture`           |                                                             | Ref ImageTexture  | Return the Godot texture holding the page content to other Godot element that needs it for the rendering.                                                                                                                                   |
| `set_zoom_level`        | `delta`: float                                                |                   | Set the render zoom level.                                                                                                                                                                                                                  |
| `load_url`              | `url`: string                                                 |                   | Load the given web page                                                                                                                                                                                                                     |
| `is_loaded`             |                                                             | bool              | Return true if a document has been loaded in the browser.                                                                                                                                                                                   |
| `get_url`               |                                                             | string            | Get the current url of the browser.                                                                                                                                                                                                         |
| `stop_loading`          |                                                             |                   | Stop loading the page.                                                                                                                                                                                                                      |
| `has_previous_page`     |                                                             | bool              | Return true if the browser can navigate to the previous page.                                                                                                                                                                               |
| `has_next_page`         |                                                             | bool              | Return true if the browser can navigate to the next page.                                                                                                                                                                                   |
| `previous_page`         |                                                             |                   | Navigate to the previous page if possible.                                                                                                                                                                                                  |
| `next_page`             |                                                             |                   | Navigate to the next page if possible.                                                                                                                                                                                                      |
| `resize`                |  `width`: int, `height`: int                                    |                   | Reshape the windows size.                                                                                                                                                                                                                   |
| `set_viewport`          |  `x`: float, `y`: float, `width`: float, `height`: float            |                   | the rectangle on the surface where to display the web document. Values are in percent of the dimension on the surface. If this function is not called default values are: x = y = 0 and w = h = 1 meaning the whole surface will be mapped. |
| `on_key_pressed`        | `key`: int, `pressed`: bool, `shift`: bool, `alt`: bool, `ctrl`: bool |                   | Set the new keyboard state (char typed ...)                                                                                                                                                                                                 |
| `on_mouse_moved`        | `x`: int, `y`: int                                              |                   | Set the new mouse position.                                                                                                                                                                                                                 |
| `on_mouse_left_click`   |                                                             |                   | Down then up on Left button                                                                                                                                                                                                                 |
| `on_mouse_right_click`  |                                                             |                   | Down then up on Right button.                                                                                                                                                                                                               |
| `on_mouse_middle_click` |                                                             |                   | Down then up on middle button.                                                                                                                                                                                                              |
| `on_mouse_left_down`    |                                                             |                   | Left Mouse button down.                                                                                                                                                                                                                     |
| `on_mouse_left_up`      |                                                             |                   | Left Mouse button up.                                                                                                                                                                                                                       |
| `on_mouse_right_down`   |                                                             |                   | Right Mouse button down.                                                                                                                                                                                                                    |
| `on_mouse_right_up`     |                                                             |                   | Right Mouse button up.                                                                                                                                                                                                                      |
| `on_mouse_middle_down`  |                                                             |                   | Middle Mouse button down.                                                                                                                                                                                                                   |
| `on_mouse_middle_up`    |                                                             |                   | Middle Mouse button up.                                                                                                                                                                                                                     |
| `on_mouse_wheel`        | `delta`: int                                                |                   | Vertical Mouse Wheel.                                                                                                                                                                                                                                |
| `on_mouse_wheel_horizontal` | `delta`: int                                            |                   | Horizontal Mouse Wheel.                                                                                                                                                                                                                     |

